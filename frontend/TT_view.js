let timetable = {
	"course": "btechcse",
	"semester": "6",
	"section": "A",
	"schedule": {
	  "mon": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"10-11": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"11-12": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		}
	  },
	  "tue": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"10-11": {
		  "class_id": "2001",
		  "subjectcode": "TCS601",
		  "slotdata": "TCS601\nDepartment of visual Art"
		},
		"11-12": {
		  "class_id": "5006",
		  "subjectcode": "XCS601Q",
		  "slotdata": "XCS601Q\nreachers scholer room (room beside audi)"
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		}
	  },
	  "wed": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"10-11": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"11-12": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "71",
		  "subjectcode": "XCS601Q",
		  "slotdata": "XCS601Q\nCR103"
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		}
	  },
	  "thu": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"10-11": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"11-12": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		}
	  },
	  "fri": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "33",
		  "subjectcode": "PXCS601",
		  "slotdata": "PXCS601\nBosch lab"
		},
		"10-11": {
		  "class_id": "33",
		  "subjectcode": "PXCS601",
		  "slotdata": "PXCS601\nBosch lab"
		},
		"11-12": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		}
	  },
	  "sat": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"10-11": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"11-12": {
		  "class_id": "89",
		  "subjectcode": "XCS601Q",
		  "slotdata": "XCS601Q\nCR106"
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		}
	  },
	  "sun": {
		"08-09": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"09-10": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"10-11": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"11-12": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"12-01": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"01-02": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"02-03": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"03-04": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"04-05": {
		  "class_id": "0",
		  "subjectcode": "",
		  "slotdata": ""
		},
		"05-06": {
		  "class_id": "87",
		  "subjectcode": "TCS604",
		  "slotdata": "TCS604\nCR105"
		}
	  }
	},
	"teacher_subject_data": [
	  {
		"subjectcode": "TCS601",
		"teacherid": "2",
		"weekly_hrs": "",
		"teachername": "DR DEVESH P SINGH",
		"subjectname": "COMPILER DESIGN",
		"theory_practical": ""
	  },
	  {
		"subjectcode": "PXCS601",
		"teacherid": "21011355",
		"weekly_hrs": "",
		"teachername": "MS NEELAM",
		"subjectname": "CAREER SKILLS LAB",
		"theory_practical": ""
	  },
	  {
		"subjectcode": "XCS601Q",
		"teacherid": "10",
		"weekly_hrs": "",
		"teachername": "MR PA ANAND",
		"subjectname": "CAREER SKILLS QUANT",
		"theory_practical": ""
	  },
	  {
		"subjectcode": "TCS604",
		"teacherid": "3",
		"weekly_hrs": "",
		"teachername": "DR SATVIK VATS",
		"subjectname": "COMPUTER NETWORKS I",
		"theory_practical": ""
	  }
	]
  }

const letmesee2 = (temp_obj) => {
    for (let i = 1; i <= 7; i++) {
        let currrow = document.getElementById("mytable").rows[i].cells[0].innerHTML.toLowerCase();
        for (let j = 1; j <= 10; j++) {
            let currcol = document.getElementById("mytable").rows[0].cells[j].innerHTML.toLowerCase();
            if (temp_obj && temp_obj.schedule && temp_obj.schedule[currrow] && temp_obj.schedule[currrow][currcol] && temp_obj.schedule[currrow][currcol].slotdata) {
                document.getElementById("mytable").rows[i].cells[j].setAttribute("class", "text bg-danger text-white heading-text border");
                document.getElementById("mytable").rows[i].cells[j].innerHTML = temp_obj.schedule[currrow][currcol].slotdata.replace("\n", "<br>");;
            }
            else {
                document.getElementById("mytable").rows[i].cells[j].setAttribute("class", "text bg-primary text-white heading-text border");
                document.getElementById("mytable").rows[i].cells[j].innerHTML = '';
            }
        }
    }
};
// letmesee2(temp_obj)

const letmeseeitbaby = () => {
    let course = document.getElementById("course_option").value;
    let semester = document.getElementById("semester_option").value;
    let section = document.getElementById("section_option").value;


    // let queryString = `?course=${course}&semester=${semester}&section=${section}`;  // Constructing the query string
    // console.log("Request URL: http://127.0.0.1:3000/table/get-timetable" + queryString);    // Logging the constructed query string

    // Sending the GET request
    fetch('http://127.0.0.1:3000/table/get-timetable?' + new URLSearchParams({ course: course, semester: semester, section: section }), {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json'
        }
    })
        .then(response => response.json())
        .then(data => {
            temp_obj = data;        // Do something with the response data here 
            console.log(data);
            letmesee2(timetable);
        })
        .catch(error => console.error('Data unavailable:', error));
}
letmeseeitbaby()

document.getElementById('letmesee').addEventListener('click', letmeseeitbaby);

